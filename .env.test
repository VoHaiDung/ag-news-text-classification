# ================================================
# Test Environment Configuration
# ================================================
#
# Environment variables for testing following:
# - The Twelve-Factor App methodology (https://12factor.net/)
# - Best practices from "Continuous Delivery" (Humble & Farley, 2010)
#
# Author: Võ Hải Dũng
# Project: AG News Text Classification
# License: MIT

# ===== PROJECT SETTINGS =====
PROJECT_NAME="AG News Classification - Test"
PROJECT_VERSION="1.0.0"
ENVIRONMENT="test"
DEBUG=True
LOG_LEVEL="DEBUG"

# ===== PATHS CONFIGURATION =====
# Use relative paths for testing portability
ROOT_DIR="."
DATA_DIR="./data/test"
MODEL_DIR="./models/test"
OUTPUT_DIR="./outputs/test"
LOG_DIR="./logs/test"
CACHE_DIR="./.cache/test"
TEMP_DIR="./tmp/test"

# ===== MODEL CONFIGURATION =====
# Use smaller models for faster testing
DEFAULT_MODEL="distilbert-base-uncased"
MAX_SEQUENCE_LENGTH=128
BATCH_SIZE=8
NUM_EPOCHS=2
LEARNING_RATE=2e-5

# ===== TESTING PARAMETERS =====
# Test-specific settings
TEST_TIMEOUT=300  # 5 minutes per test
TEST_SAMPLE_SIZE=100  # Use small sample for speed
TEST_RANDOM_SEED=42
PYTEST_WORKERS=4
COVERAGE_THRESHOLD=80

# ===== DATABASE (Test Database) =====
# Use SQLite for testing
DATABASE_URL="sqlite:///./test.db"
DATABASE_POOL_SIZE=5
DATABASE_ECHO=False

# ===== REDIS (Test Cache) =====
# Use mock Redis or test instance
REDIS_URL="redis://localhost:6379/1"  # Use database 1 for testing
REDIS_PREFIX="ag_news_test"
REDIS_TTL=60

# ===== API CONFIGURATION =====
# Test API settings
API_HOST="127.0.0.1"
API_PORT=8001  # Different port for testing
API_WORKERS=1
API_RELOAD=False
API_DOCS_ENABLED=True
API_RATE_LIMIT=1000
API_TIMEOUT=30

# ===== EXTERNAL SERVICES (Mocked) =====
# Mock external services for testing
USE_MOCK_SERVICES=True

# OpenAI API (Mocked)
OPENAI_API_KEY="test_key_not_real"
OPENAI_MODEL="gpt-3.5-turbo"
MOCK_GPT_RESPONSES=True

# Weights & Biases (Offline mode)
WANDB_MODE="offline"
WANDB_PROJECT="ag-news-test"
WANDB_API_KEY="test_key_not_real"
WANDB_DISABLED=True

# Hugging Face (Use cache)
HF_TOKEN="test_token_not_real"
HF_DATASETS_OFFLINE=True
TRANSFORMERS_OFFLINE=True
HF_HOME="./.cache/huggingface/test"

# ===== SECURITY (Test Values) =====
# Use test values, never real secrets
SECRET_KEY="test_secret_key_not_for_production"
JWT_SECRET="test_jwt_secret"
JWT_ALGORITHM="HS256"
JWT_EXPIRATION_MINUTES=60
ALLOWED_HOSTS="localhost,127.0.0.1,testserver"
CORS_ORIGINS="http://localhost:3000,http://127.0.0.1:3000"

# ===== PERFORMANCE SETTINGS =====
# Optimized for test speed
MAX_WORKERS=2
THREAD_POOL_SIZE=4
CONNECTION_POOL_SIZE=5
CACHE_ENABLED=False  # Disable cache for test isolation

# ===== GPU SETTINGS =====
# Use CPU for CI/CD testing
CUDA_VISIBLE_DEVICES=""
USE_GPU=False
MIXED_PRECISION=False
GRADIENT_CHECKPOINTING=False

# ===== DATA SETTINGS =====
# Test data configuration
USE_SAMPLE_DATA=True
SAMPLE_DATA_SIZE=1000
DATA_VALIDATION_ENABLED=True
DATA_AUGMENTATION_ENABLED=False

# ===== MONITORING (Disabled for tests) =====
PROMETHEUS_ENABLED=False
METRICS_ENABLED=False
TRACING_ENABLED=False
PROFILING_ENABLED=False

# ===== FEATURE FLAGS =====
# Test-specific feature flags
ENABLE_EXPERIMENTAL_FEATURES=True
ENABLE_PROMPT_ENGINEERING=True
ENABLE_DISTILLATION=False
ENABLE_ENSEMBLE=False
ENABLE_ACTIVE_LEARNING=False

# ===== CI/CD INTEGRATION =====
# CI/CD specific settings
CI=True
GITHUB_ACTIONS=True
CODECOV_TOKEN="test_token"
PYTEST_ADDOPTS="--cov=src --cov-report=xml --cov-report=term"

# ===== TEST DATA GENERATION =====
# Faker settings for test data
FAKER_SEED=42
GENERATE_TEST_DATA=True
TEST_DATA_LOCALE="en_US"

# ===== CLEANUP SETTINGS =====
# Automatic cleanup after tests
AUTO_CLEANUP=True
CLEANUP_ON_SUCCESS=True
CLEANUP_ON_FAILURE=False
PRESERVE_FAILED_TEST_DATA=True

# ===== ASSERTION SETTINGS =====
# Pytest assertion settings
PYTEST_ASSERT_DETAILS=True
PYTEST_STRICT_MARKERS=True
PYTEST_STRICT_CONFIG=True

# ===== MOCK SETTINGS =====
# Mock configuration
MOCK_EXTERNAL_APIS=True
MOCK_DATABASE_CALLS=False
MOCK_FILE_SYSTEM=False
USE_FIXTURES=True

# ===== DOCUMENTATION =====
# Test documentation generation
GENERATE_TEST_DOCS=False
TEST_COVERAGE_REPORT=True
TEST_PERFORMANCE_REPORT=False

# ===== DEBUGGING =====
# Debug settings for tests
ENABLE_BREAKPOINTS=False
SAVE_TEST_ARTIFACTS=True
VERBOSE_TEST_OUTPUT=False
CAPTURE_LOGS=True

# ===== INTEGRATION TESTS =====
# Integration test settings
RUN_INTEGRATION_TESTS=False
INTEGRATION_TEST_TIMEOUT=600
USE_TEST_CONTAINERS=False

# ===== END-TO-END TESTS =====
# E2E test settings
RUN_E2E_TESTS=False
E2E_BASE_URL="http://localhost:8001"
E2E_HEADLESS=True

# Note: This is a test configuration file.
# Never use these values in production!
# Always use separate, secure configurations for each environment.
