# Adversarial Augmentation Configuration
# =======================================
#
# Adversarial text generation following:
# - Miyato et al. (2017): "Adversarial Training Methods for Semi-Supervised Text Classification"
# - Zhang et al. (2019): "PAWS: Paraphrase Adversaries from Word Scrambling"
# - Morris et al. (2020): "TextAttack: A Framework for Adversarial Attacks"
#
# Author: Võ Hải Dũng
# License: MIT

name: adversarial_augmentation
type: augmentation
description: "Generate adversarial examples for robustness"

# Attack methods
attacks:
  # TextFooler
  textfooler:
    enabled: true
    importance_score: "delete"  # delete, unk, weighted
    synonym_source: "wordnet"  # wordnet, embedding
    max_candidates: 50
    min_similarity: 0.7
    
  # BERT-Attack
  bert_attack:
    enabled: true
    masked_lm_model: "bert-base-uncased"
    max_masked_tokens: 5
    top_k_candidates: 10
    
  # Word-level attacks
  word_swap:
    enabled: true
    swap_method: "embedding"  # embedding, synonym, random
    max_swaps: 3
    preserve_pos: true
    
  # Character-level attacks
  char_attacks:
    enabled: false
    typos: true
    keyboard_adjacency: true
    visual_similarity: true
    max_perturbations: 2

# Perturbation constraints
constraints:
  # Semantic similarity
  min_semantic_similarity: 0.8
  similarity_metric: "cosine"
  
  # Grammaticality
  check_grammar: true
  grammar_model: "textattack/roberta-base-CoLA"
  min_grammar_score: 0.7
  
  # Perplexity
  max_perplexity_increase: 2.0
  
  # Edit distance
  max_edit_distance: 5
  max_word_distance: 3

# Generation strategy
strategy:
  # Number of adversarial examples per original
  num_adversarial: 2
  
  # Attack success requirement
  require_misclassification: false
  target_confidence_reduction: 0.3
  
  # Diversity
  ensure_diversity: true
  min_diversity: 0.3

# Virtual adversarial training
vat:
  enabled: true
  epsilon: 1.0
  xi: 1e-6
  iterations: 1
  
  # KL divergence weight
  kl_weight: 1.0

# Fast Gradient Method (FGM)
fgm:
  enabled: true
  epsilon: 0.5
  norm_type: 2  # L2 norm

# Projected Gradient Descent (PGD)
pgd:
  enabled: false
  epsilon: 1.0
  alpha: 0.3
  iterations: 3

# Quality assurance
quality:
  # Human evaluation simulation
  fluency_check: true
  min_fluency: 0.8
  
  # Preserve sentiment
  preserve_sentiment: true
  max_sentiment_shift: 0.2
  
  # Label preservation
  preserve_label: true

# Application
application:
  # Training integration
  mix_with_original: true
  adversarial_ratio: 0.2
  
  # Curriculum
  start_epoch: 3
  increase_gradually: true

# Expected robustness gains
expected_gains:
  adversarial_accuracy: "+10-15%"
  standard_accuracy: "+1-2%"
  generalization: "Improved"

references:
  - "https://arxiv.org/abs/1605.07725"
  - "https://arxiv.org/abs/2005.00174"
